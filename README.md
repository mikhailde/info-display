# Система информирования пассажиров на остановках общественного транспорта ФТ "Сириус"

## Описание

Проект разработки и внедрения системы информирования пассажиров на остановках общественного транспорта. Пилотный этап: 8 остановок.

## Быстрый старт

1. **Клонируйте репозиторий:**

    ```bash
    git clone https://github.com/mikhailde/sirius-info-boards.git
    cd sirius-info-boards
    ```

2. **Соберите и запустите сервисы (потребуется Docker и Docker Compose):**

    ```bash
    docker-compose up --build -d
    ```

3. **Дождитесь пока запустятся все сервисы, после чего переходите по адресу в браузере (потребуется Nginx):**

    `localhost`

## Структура репозитория

```
.
├── docs            # Документация
├── infra           # Инфраструктурные файлы (docker-compose, mosquitto)
├── nginx           # Конфигурация Nginx
├── openapi.yaml    # Спецификация OpenAPI
├── services        # Исходный код сервисов
│   ├── content     # Микросервис управления контентом
│   ├── device      # Микросервис управления устройствами (связь с табло)
│   ├── frontend    # Frontend (HTML, CSS, JS) WEB-интерфейса администратора
│   └── weather     # Микросервис получения данных о погоде
└── README.md       # Этот файл
```

## Сервисы

| Сервис          | Описание                                                                                              | Язык/Фреймворк     |
| --------------- | ----------------------------------------------------------------------------------------------------- | ------------------ |
| `content`       | Управление статическим контентом (сообщение на табло).                                               | Python/FastAPI     |
| `device`        | Взаимодействие с табло, отправка сообщений через MQTT.                                                  | Python/FastAPI     |
| `weather`       | Получение данных о погоде от API Яндекс.Погоды, кэширование.                                        | Python/FastAPI     |
| `frontend`      | WEB-интерфейс администратора для управления контентом.                                                | HTML, CSS, JS     |
| `nginx`         | API Gateway. Обеспечивает маршрутизацию запросов к сервисам, базовую аутентификацию.                  | Nginx              |
| `mosquitto`     | MQTT брокер. Используется для обмена сообщениями между `device` сервисом и табло.                    |                    |
| `postgres`      | База данных PostgreSQL. Используется сервисом `content` для хранения статического контента (сообщений) |                    |

## Стек технологий

*   **Backend:** Python 3.11, FastAPI, SQLAlchemy, Pydantic, Psycopg2
*   **API Gateway:** Nginx
*   **Брокер сообщений:** Mosquitto (MQTT)
*   **База данных:** PostgreSQL (+TimescaleDB)
*   **Контейнеризация:** Docker, Docker Compose
*   **Информационное табло:** Android 11, Java/Kotlin
*   **Frontend:** HTML, CSS, JavaScript
*   **API Яндекс.Погоды:** Получение данных о погоде
*   **Тестирование:** Pytest (планируется)


## Дальнейшее развитие

*   Интеграция с API Яндекс Карт для отображения динамических данных о местоположении транспорта.
*   Интеграция с РАСЦО ФТ "Сириус" для отображения экстренных сообщений.
*   Разработка Android приложения для табло.
*   Добавление тестов, настройка CI/CD.
*   Настройка мониторинга (Prometheus + Grafana).
*   Настройка резервного копирования и отказоустойчивости.
*   Настройка HTTPS.
*   Внесение правок и улучшений в соответствии с ТЗ.
